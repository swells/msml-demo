/*!
 * `deployr` JavaScript Client Library v7.4.0
 * http://deployr.revolutionanalytics.com/documents/dev/client-jsdoc
 *
 * Copyright (C) 2010-2015 by Revolution Analytics Inc.
 * Released under the Apache License 2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Includes:
 *   - superagent: https://github.com/visionmedia/superagent
 *   - ws: https://github.com/einaros/ws
 *   - D.js: http://malko.github.io/D.js
 *   - yui-lang.js: https://github.com/yui/yui3 (DeployR port)
 *
 * superagent
 *
 * Copyright (c) 2014-2015 TJ Holowaychuk <tj@vision-media.ca>
 * Open Source Initiative OSI - The MIT License
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the,
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * ws
 *
 * Copyright (c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * Open Source Initiative OSI - The MIT License
 *
 * Permission is hereby granted, free of charge, to any person obtaining 
 * a copy of this software and associated documentation files 
 * (the "Software"), to deal in the Software without restriction, 
 * including without limitation the rights to use, copy, modify, merge
 * publish, distribute, sublicense, and/or sell copies of the Software, 
 * and to permit persons to whom the Software is furnished to do so, 
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be 
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, 
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF 
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
 * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY 
 * CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, 
 * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE 
 * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * D
 *
 * Copyright (C) 2013 Jonathan Gotti <jgotti at jgotti dot net>
 * Open Source Initiative OSI - The MIT License
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the,
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * selfish
 *
 * Copyright 2011 Irakli Gozalishvili. All rights reserved
 * Open Source Initiative OSI - The MIT License
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the,
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * yui-lang
 *
 * The lang component is a DeployR port of yui-lang.js by Yahoo!
 *
 * Software License Agreement (BSD License)
 * Copyright (c) 2013, Yahoo! Inc. All rights reserved.
 *
 * Redistribution and use of this software in source and binary forms, 
 * with or without modification, are permitted provided that the 
 * following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer. Redistributions
 * in binary form must reproduce the above copyright notice, this list of
 * conditions and  the following disclaimer in the documentation and/or 
 * other materials provided with the distribution.
 * 
 * Neither the name of Yahoo! Inc. nor the names of YUI's contributors 
 * may be used to endorse or promote products derived from this software 
 * without specific prior written permission of Yahoo! Inc.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT 
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR 
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT 
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, 
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT 
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, 
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY 
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT, 
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE 
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Date: 2015-04-02
 */
(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.deployr=e()}})(function(){var e,t,r;return function i(e,t,r){function o(s,a){if(!t[s]){if(!e[s]){var c=typeof require=="function"&&require;if(!a&&c)return c(s,!0);if(n)return n(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=t[s]={exports:{}};e[s][0].call(l.exports,function(t){var r=e[s][1][t];return o(r?r:t)},l,l.exports,i,e,t,r)}return t[s].exports}var n=typeof require=="function"&&require;for(var s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,r){(function(r){var i=typeof window!=="undefined",o=e("superagent"),n=e("d.js"),s=e("fs"),a=e("./apis.json"),c=e("./lib/es"),u=e("./lib/utils"),l=e("./lib/lang"),p=e("./lib/logger"),f=e("./lib/queue"),h=e("./lib/emitter"),d=e("./lib/encoder"),y=e("./lib/selfish").Base,m=e("./lib/rinput"),v=e("./lib/rinputs"),R=u.merge;p.setLevel(p.OFF);var g={cors:false,logging:false,sticky:false,cookies:null,host:"",allowSelfSignedSSLCert:false,maxRequests:null,events:{},set:function(e,t){if(e!=="set"){if(e==="host"&&t){t=t.replace(/\/*$|\/*deployr\/*$/,"");t=new RegExp("^(http|https)://","i").test(t)?t:"http://"+t}this[e]=t}}};var j=["user","project","workspace","execution","directory","repository","packages"];function T(e,t){var r=t.deployr?t.deployr.response.errorCode:t.status,i=this;if(g.events){if(!t.deployr){t=t.text}i=g.events.ctx||i;if(g.events.error){g.events.error.apply(i,[e,t])}if(g.events[r]){g.events[r].apply(i,[e,t])}}}var E=y.extend(h,v,{initialize:function O(e,t){h.initialize.call(this,{});var s=g;if(!a[e]){throw new Error('Invalid API "'+e+'"')}this.api=R({call:e},a[e]);this.link=t||{};this.q=this.link.queue||new f;this.deferred=this.link.deferred||n();this.cookies=this.link.cookies;this.logger=p.get(e,p.OFF);this.params={};this.inputs=[];this.outputs=[];this.rstream=false;this.delayed=false;this.globalEvts=true;this.file=null;this.filter=null;this.data({format:this.api.format});this.req=o[this.api.method.toLowerCase()](s.host+"/deployr"+e);this.req.timeout(20*60*1e3);if(i&&g.cors){this.req.withCredentials()}if(!i&&g.allowSelfSignedSSLCert){r.env.NODE_TLS_REJECT_UNAUTHORIZED="0"}},ctx:function(e){this.scope=e||this;return this},global:function(e){this.globalEvts=l.isBoolean(e)?e:this.globalEvts;return this},about:function(){var e=this.req.res;return this.api["call"]==="/r/user/login"&&e?e.body.get("user"):null},share:function(e){if(g.sticky){if(g.cookies){this.cookies=g.cookies.slice(0)}else{if(e){this.cookies=e.slice(0);g.set("cookies",this.cookies)}}}else{this.cookies=e?e.slice(0):this.cookies}return this},getCookies:function(){return this.cookies},delay:function(e){this.delayed=!isNaN(parseFloat(e))&&isFinite(e)?e:true;return this},drain:function(){this.delayed=false;this.q.flush();return this.deferred.promise},promise:function(){this.end();return this.deferred.promise},abort:function(){this.req.abort();this.emit("abort");this.deferred.reject(this._handleError({status:"abort",text:"DeployR request aborted."}));return this},timeout:function(e){this.req.timeout(e);return this},log:function(e){this.logger.setLevel(e||p.DEBUG);return this},entity:function(e){this.filter=u.inArray(j,e);return this},data:function(e){e=e||{};if(e.rinput||e.rinputs){this.rinput(e.rinput);this.rinputs(e.rinputs)}var t=["rinput","rinputs","__cookies__"];t.forEach(function(t){delete e[t]});this.params=R(this.params,e);return this},attach:function(e,t){if(this.api.upload){this.file=e;if(t){this.data({filename:t})}}return this},stream:function(){this.rstream=!i&&this.api.upload;return this},ensure:function(e){this.deferred.promise.ensure(e);return this.deferred.promise},error:function(e){this.on("error",e);return this},pipe:function(e){var t=this.q,r=this.api;t.add(function(i,o,n){if(o){this.deferred.reject(o);t.flush(i,o,n);this._clear();return}this._prepRequest(i,n);p.info("pipe()",r,this.req);this.logger.info("pipe()",r,this.req);var s=this.req.pipe(e);t.yield(true);s.on("error",function(){});s.on("end",function(){});s.on("data",function(){})},this);if(t.size()<=1){t.flush()}return e},end:function(e){var t=this,r=this.q,i=this.api,o=null,n=this.filter;r.add(function(s,a,c){if(a){this.deferred.reject(a);r.flush(s,a,c);this._clear();return}this._prepRequest(s,c);p.info("io()",i,this.req);this.logger.info("io()",i,this.req);this.req.end(function(c){t.share(t.cookies||c.headers["set-cookie"]);if(t.cookies){p.info("cookies",i,t.cookies);t.logger.info("cookies",i,t.cookies)}a=t._handleError(c);var l=c.body&&c.body.deployr?c.body:c;t.inputs=[];t.outputs=[];if(!a){p.info("end()",i,l,c);t.logger.info("end()",i,l,c);if(n){l=l.deployr.response[n]||l}l.get=function(e){return u.get(l.deployr.response,e)};l.workspace=function(e){return u.workspace(l.deployr.response,e)};if(e){o=e.apply(t.scope,[l,s])}if(r.size()===0){t._clear();t.deferred.resolve(s||l)}o=R(o,{__cookies__:t.cookies})}r.yield(false);r.flush(l,a,o)});r.yield(true)},this,this.delayed);if(!this.delayed&&r.size()<=1){r.flush()}return this},io:function(e){return E.new(e,{cookies:this.cookies,queue:this.q,deferred:this.deferred})},script:function(){var e=u.signature(arguments),t=e.opts,r=e.api,i={cookies:this.cookies,queue:this.q,deferred:this.deferred};if(e.create){return E.new("/r/project/create",i).end(function(e){return{project:e.get("project").project}}).io(r).data(t)}else{return E.new(r,i).data(t)}},shell:function(e,t){var r={cookies:this.cookies,queue:this.q,deferred:this.deferred},i=l.isString(e)?e.split("/"):[];if(i.length>3){i=i.slice(1)}return E.new("/r/repository/shell/execute",r).data({author:i[0],directory:i[1],filename:i[2],args:t})},code:function(e,t){var r={cookies:this.cookies,queue:this.q,deferred:this.deferred},i="/r/project/execute/code";if(!t){return E.new("/r/project/create",r).end(function(e){return{project:e.get("project").project}}).io(i).data({code:e})}else{return E.new(i,r).data({code:e,project:t})}},release:function(e,t){e=l.isArray(e)?e:[e];var r=this,i=n(),o=!e||!e[0],s=0,a=!o?e.length-1:s,c=this.getCookies();function u(e){if(e===a){if(!t){E.new("/r/user/logout").share(c).error(function(){i.reject(false)}).end(function(){i.resolve(true)}).ensure(function(){r.destroy()})}else{i.resolve(true);r.destroy()}}}if(!o){e.forEach(function(e){E.new("/r/project/close").data({project:e}).share(c).end().ensure(function(){u(s);s++})})}else{u(s)}return i.promise},routputs:function(e){if(e){this.outputs=this.outputs.concat(e)}return this},routput:function(e){if(e){this.routputs([e])}return this},rinputs:function(e){if(e){this.inputs=this.inputs.concat(e)}return this},rinput:function(e){if(e){this.inputs.push(e)}return this},destroy:function(){try{this.emit("destroy");this.offAll();for(var e in this){if(this.hasOwnProperty(e)){this[e]=null;delete this[e]}}}catch(t){}},_clear:function(){this.params={};this.inputs=[];this.outputs=[];this.rstream=false;this.delayed=false;this.api=null;this.file=null;this.filter=null},_prepRequest:function(e,t){var r=this.req,o=this.file;if(this.api.upload){if(!i){this.req.type("multipart/form-data")}}else{r.type("form")}r.on("error",function(e){e=e||{code:"UNKNOWN CODE",text:"UNKNOWN ERROR"};this._handleError({status:e.code||"UNKNOWN CODE",text:e})}.bind(this));this.share(t?t.__cookies__:null);if(t){this.data(t)}if(this.inputs.length>0){this.data({inputs:d.encode(this.inputs)})}if(this.outputs.length>0){this.data({robjects:this.outputs.join()})}if(this.cookies){this.cookies.forEach(function(e){r.set("Cookie",e)})}if(this.api.upload){for(var n in this.params){r.field(n,this.params[n]?this.params[n]+"":"")}r.attach("file",this.rstream?s.createReadStream(o):o)}else{r[this.api.method==="GET"?"query":"send"](this.params)}},_handleError:function(e){var t=e.status,r=e.body&&e.body.deployr?e.body:e,i=t!==200||r.deployr&&!r.deployr.response.success;if(i){r={get:function(e){return u.get(this.deployr.response,e)},deployr:{response:{success:false,call:this.api["call"],errorCode:r.deployr?r.deployr.response.errorCode:t,error:r.deployr?r.deployr.response.error:r.text}}};p.error("error()",this.api,r,e);this.logger.error("error()",this.api,r,e);if(this.globalEvts){T(this.api["call"],r)}this.emit("error",r);this.emit("deployr-io:"+r.deployr.response.errorCode,r);this.deferred.reject(r)}return i}});if(i){window.Revolution=window.Revolution||e("./lib/deprecated")}t.exports={DeployR:E,apis:function(e){return e?Object.keys(a):a},configure:function(e){e=e||{};for(var t in e){g.set(t,e[t])}if(!g.sticky){g.set("cookies",null)}p.setLevel(g.logging?p.DEBUG:p.OFF);return this},io:function(e){return E.new(e)},auth:function(e,t){var r={username:e,password:t};return E.new("/r/user/login").data(r).end()},script:function(){var e=u.signature(arguments),t=e.opts,r=e.api;if(e.create){return E.new("/r/project/create").end(function(e){return{project:e.get("project").project}}).io(r).data(t)}else{return E.new(r).data(t)}},pipeline:function(e){var t=this,r=n(),i=new f,o=[],s=[],a=null,c={sticky:g.sticky,cookies:g.cookies};e=e.slice(0);t.configure({sticky:true});function u(){i.add(function(){e.shift().drain().then(function(e){o.push(e);s.push(a);if(i.isEmpty()){t.configure(c);r.resolve({results:o,errors:s})}i.take()},function(e){o.push(a);s.push(e);if(i.isEmpty()&&o.length===0){t.configure(c);r.reject(s)}i.take()})},null,true)}for(var l=0;l<e.length;l++){u()}i.take();return r.promise},es:function(e){var t=c.new(g.host,e);if(e&&e.username&&e.password){var r=this.auth(e.username,e.password);r.ensure(function(){t.share(r.getCookies());t.flush()})}return t},RInput:{numeric:function(e,t){return m.new(e,t).numeric()},integer:function(e,t){return m.new(e,t).integer()},logical:function(e,t){return m.new(e,t).logical()},character:function(e,t){return m.new(e,t).character()},date:function(e,t){return m.new(e,t).date()},posixct:function(e,t){return m.new(e,t).posixct()},numericVector:function(e,t){return m.new(e,t).numericVector()},integerVector:function(e,t){return m.new(e,t).integerVector()},logicalVector:function(e,t){return m.new(e,t).logicalVector()},characterVector:function(e,t){return m.new(e,t).characterVector()},dateVector:function(e,t){return m.new(e,t).dateVector()},posixctVector:function(e,t){return m.new(e,t).posixctVector()},list:function(e,t){return m.new(e,t).list()},dataframe:function(e,t){return m.new(e,t).dataframe()},factor:function(e,t,r,i){var o={levels:r,labels:i};return m.new(e,t,o).factor()},ordered:function(e,t,r,i){var o={levels:r,labels:i};return m.new(e,t,o).ordered()},numericMatrix:function(e,t){return m.new(e,t).numericMatrix()},integerMatrix:function(e,t){return m.new(e,t).integerMatrix()},logicalMatrix:function(e,t){return m.new(e,t).logicalMatrix()},characterMatrix:function(e,t){return m.new(e,t).characterMatrix()}}}}).call(this,e("_process"))},{"./apis.json":2,"./lib/deprecated":3,"./lib/emitter":4,"./lib/encoder":5,"./lib/es":6,"./lib/lang":7,"./lib/logger":8,"./lib/queue":10,"./lib/rinput":11,"./lib/rinputs":12,"./lib/selfish":14,"./lib/utils":15,_process:17,"d.js":18,fs:16,superagent:19}],2:[function(e,t,r){t.exports={"/r/user/login":{method:"POST",format:"json"},"/r/user/logout":{method:"POST",format:"json"},"/r/user/about":{method:"POST",format:"json"},"/r/user/autosave":{method:"POST",format:"json"},"/r/user/release":{method:"POST",format:"json"},"/r/project/create":{method:"POST",format:"json"},"/r/project/pool":{method:"POST",format:"json"},"/r/project/recycle":{method:"POST",format:"json"},"/r/project/list":{method:"POST",format:"json"},"/r/project/ping":{method:"POST",format:"json"},"/r/project/about":{method:"POST",format:"json"},"/r/project/about/update":{method:"POST",format:"json"},"/r/project/save":{method:"POST",format:"json"},"/r/project/saveas":{method:"POST",format:"json"},"/r/project/close":{method:"POST",format:"json"},"/r/project/grant":{method:"POST",format:"json"},"/r/project/import":{method:"POST",format:"json",upload:true},"/r/project/export":{method:"POST",format:"json"},"/r/project/delete":{method:"POST",format:"json"},"/r/project/execute/code":{method:"POST",format:"json"},"/r/project/execute/script":{method:"POST",format:"json"},"/r/project/execute/interrupt":{method:"POST",format:"json"},"/r/project/execute/console":{method:"POST",format:"json"},"/r/project/execute/history":{method:"POST",format:"json"},"/r/project/execute/flush":{method:"POST",format:"json"},"/r/project/execute/result/list":{method:"POST",format:"json"},"/r/project/execute/result/download":{method:"POST",format:"json"},"/r/project/execute/result/delete":{method:"POST",format:"json"},"/r/project/workspace/list":{method:"POST",format:"json"},"/r/project/workspace/get":{method:"POST",format:"json"},"/r/project/workspace/upload":{method:"POST",format:"json",upload:true},"/r/project/workspace/transfer":{method:"POST",format:"json"},"/r/project/workspace/push":{method:"POST",format:"json"},"/r/project/workspace/save":{method:"POST",format:"json"},"/r/project/workspace/store":{method:"POST",format:"json"},"/r/project/workspace/load":{method:"POST",format:"json"},"/r/project/workspace/delete":{method:"POST",format:"json"},"/r/project/directory/list":{method:"POST",format:"json"},"/r/project/directory/upload":{method:"POST",format:"json",upload:true},"/r/project/directory/transfer":{method:"POST",format:"json"},"/r/project/directory/write":{method:"POST",format:"json"},"/r/project/directory/update":{method:"POST",format:"json"},"/r/project/directory/store":{method:"POST",format:"json"},"/r/project/directory/load":{method:"POST",format:"json"},"/r/project/directory/download":{method:"POST",format:"json"},"/r/project/directory/delete":{method:"POST",format:"json"},"/r/project/package/list":{method:"POST",format:"json"},"/r/project/package/attach":{method:"POST",format:"json"},"/r/project/package/detach":{method:"POST",format:"json"},"/r/job/list":{method:"POST",format:"json"},"/r/job/submit":{method:"POST",format:"json"},"/r/job/schedule":{method:"POST",format:"json"},"/r/job/query":{method:"POST",format:"json"},"/r/job/cancel":{method:"POST",format:"json"},"/r/job/delete":{method:"POST",format:"json"},"/r/repository/directory/list":{method:"POST",format:"json"},"/r/repository/directory/create":{method:"POST",format:"json"},"/r/repository/directory/rename":{method:"POST",format:"json"},"/r/repository/directory/copy":{method:"POST",format:"json"},"/r/repository/directory/move":{method:"POST",format:"json"},"/r/repository/directory/update":{method:"POST",format:"json"},"/r/repository/script/list":{method:"POST",format:"json"},"/r/repository/script/execute":{method:"POST",format:"json"},"/r/repository/script/render":{method:"POST",format:"json"},"/r/repository/script/interrupt":{method:"POST",format:"json"},"/r/repository/shell/execute":{method:"POST",format:"json"},"/r/repository/directory/archive":{method:"POST",format:"json"},"/r/repository/directory/upload":{method:"POST",format:"json",upload:true},"/r/repository/directory/download":{method:"POST",format:"json"},"/r/repository/directory/delete":{method:"POST",format:"json"},"/r/repository/file/list":{method:"POST",format:"json"},"/r/repository/file/fetch":{method:"POST",format:"json"},"/r/repository/file/fetch":{method:"POST",format:"json"},"/r/repository/file/upload":{method:"POST",format:"json",upload:true},"/r/repository/file/transfer":{method:"POST",format:"json"},"/r/repository/file/write":{method:"POST",format:"json"},"/r/repository/file/update":{method:"POST",format:"json"},"/r/repository/file/diff":{method:"POST",format:"json"},"/r/repository/file/revert":{method:"POST",format:"json"},"/r/repository/file/grant":{method:"POST",format:"json"},"/r/repository/file/download":{method:"POST",format:"json"},"/r/repository/file/delete":{method:"POST",format:"json"},"/r/repository/file/copy":{method:"POST",format:"json"},"/r/repository/file/move":{method:"POST",format:"json"},"/r/server/info":{method:"GET",format:"json"}}},{}],3:[function(e,t,r){var i=e("./lang"),o=e("./selfish").Base,n=e("./rinput");var s,a,c={},u=["user","project","workspace","execution","directory","repository","packages"];var l={ENDPOINT_WHITELIST:{login:"/r/user/login",logout:"/r/user/logout",projectCreate:"/r/project/create",projectClose:"/r/project/close",projectAboutUpdate:"/r/project/about/update",projectSave:"/r/project/save",projectSaveAs:"/r/project/saveas",clientProjectSave:"/r/client/project/save",clientProjectClose:"/r/client/project/close"},session:{},config:{},setUnloadConfig:function(e){e=e||{};this.config={disableautosave:e.disableautosave||true,dropworkspace:e.dropworkspace||true,dropdirectory:e.dropdirectory||true,drophistory:e.drophistory||true,flushhistory:e.flushhistory||true}},setSession:function(e){this.session=e},setProject:function(e){this.session.project=e},clearSession:function(){this.session={}},clearProject:function(){this.session.project=null},unloadHandler:function(){try{var e=this.session.project;if(e){var t=this._config;t.project=e.id;t.projectcookie=e.cookie;deployr.io("/r/project/close").data(t).sync().end()}}catch(r){throw new Error(r)}}};function p(e,t){var r=t||globalConfig.entity;if(r){var i=e.deployr.response,o=u;for(var n=0;n<o.length;n++){var s=o[n];if(i[s]&&r[s]){if(r[s].parser){var a=r[s].scope||this;i[s]=r[s].parser.call(a,i[s])}}}}return e}function f(e,t,r){var i=e.deployr.response,o=l.ENDPOINT_WHITELIST;switch(t){case o.login:l.setSession({httpcookie:i.httpcookie,user:i.user,limits:i.limits,project:null});break;case o.logout:l.clearSession();break;case o.projectClose:case o.clientProjectClose:l.clearProject();break;case o.projectCreate:case o.projectAboutUpdate:case o.projectSave:case o.projectSaveAs:case o.clientProjectSave:var n=i.project;l.setProject({id:n.project,cookie:n.cookie});break}s.Event.fire("DeployR:endpointChange",{response:e,endpoint:t,args:r})}function h(e){e=e.replace("/r/","");return e.toLowerCase().replace(/\/(.)/g,function(e,t){return t.toUpperCase()})}function d(e){var t=[];for(var r=0;r<e.length;r++){t.push(e[r].normalize())}return t}var y=o.extend({initialize:function(e,t,r){this.type=e;this.rclass=t;this.rinput=r},getType:function(){return this.type},getRClass:function(){return this.rclass},getName:function(){return this.rinput.name},getValue:function(){return this.rinput.value},getLevels:function(){return this.rinput.levels},getLabels:function(){return this.rinput.labels},getOrdered:function(){return this.rinput.ordered},normalize:function(){return this.rinput}});function m(e){}function v(e){}m.prototype={events:{},scope:null,on:function(e,t){if(e in this.events===false){this.events[e]=[]}this.events[e].push(t);v('Emitter.on("'+e+'")');return this},emit:function(e){if(e in this.events===false){return this}for(var t=0;t<this.events[e].length;t++){v('Fired event: "'+e+'"');this.events[e][t].apply(this.scope||this,Array.prototype.slice.call(arguments,1))}return this},removeAllListeners:function(e){if(!e){for(var t in this.events){delete this.events[t]}}else{if(e in this.events===false){return this}delete this.events[e]}return this},removeListenerAt:function(e,t){var r=this.events[e],i=r.slice(t+1);r.length=t;r.push.apply(r,i);this.events[e]=r},off:function(e,t){if(e in this.events===false){return this}if(!t){return this.removeAllListeners(e)}else{for(var r=0;r<this.events[e].length;r++){if(this.events[e][r]==t){this.removeListenerAt(e,r);return this}}}return this}};a=new m;s={version:e("../package").version,Event:{on:function(e,t,r){a.on(e,t,r)},detach:function(e,t,r){a.off(e,t)}},RDataFactory:{createNumeric:function(e,t){return y.new("primitive","numeric",n.new(e,t).numeric())},createInteger:function(e,t){return y.new("primitive","integer",n.new(e,t).integer())},createBoolean:function(e,t){return y.new("primitive","numeric",n.new(e,t).logical())},createString:function(e,t){return y.new("primitive","character",n.new(e,t).character())},createDate:function(e,t){return y.new("date","Date",n.new(e,t).date())},createPOSIXDate:function(e,t){return y.new("date","POSIXct",n.new(e,t).posixct())},createNumericVector:function(e,t){return y.new("vector","numeric",n.new(e,t).numericVector())},createIntegerVector:function(e,t){return y.new("vector","integer",n.new(e,t).integerVector())},createBooleanVector:function(e,t){return y.new("vector","logical",n.new(e,t).logicalVector())},createStringVector:function(e,t){return y.new("vector","character",n.new(e,t).characterVector())},createDateVector:function(e,t){return y.new("type","Date",n.new(e,t).dateVector())},createPOSIXDateVector:function(e,t){return y.new("vector","POSIXct",n.new(e,t).posixctVector())},createList:function(e,t){return y.new("list","list",n.new(e,t).list())},createDataframe:function(e,t){return y.new("dataframe","data.frame",n.new(e,t).dataframe())},createFactor:function(e,t,r,i,o){var s={levels:i,labels:o};if(r){return y.new("factor","factor",n.new(e,t,s).ordered())}else{return y.new("factor","factor",n.new(e,t,s).factor())}},createNumericMatrix:function(e,t){return y.new("matrix","matrix",n.new(e,t).numericMatrix())},createIntegerMatrix:function(e,t){return y.new("matrix","matrix",n.new(e,t).integerMatrix())},createBooleanMatrix:function(e,t){return y.new("matrix","matrix",n.new(e,t).logicalMatrix())},createStringMatrix:function(e,t){return y.new("matrix","matrix",n.new(e,t).characterMatrix())}},DeployR:{init:function(e){e=e||{};if(e.compatibility){}if(e.events){var t=e.events;if(t.unload){l.setUnloadConfig(t.unload);s.Event.on("deployR:unload",l.unloadHandler,l)}if(t.globalIO){var r=t.globalIO.scope||window,i=t.globalIO.lifecycle,o=t.globalIO.statusCode;if(i){for(var n in i){s.Event.on("deployR-io:"+n,i[n],r)}}if(o){for(var n in o){s.Event.on("deployR-io:"+n,o[n],r)}}}}deployr.configure({host:e.deployrURI,cors:e.deployrURI?true:false,logging:e.logging,sticky:true})},io:function(e,t,r){if(console){console.warn('"'+h(e)+'()" API is now deprecated.')}r=r||{};t=t||{};var i=t.transaction||{},o=i["arguments"],n=i.statusCode||{},s=r.scope||window,c=t.robjects,u=t.inputs;if(t.transaction){delete t.transaction}if(t.method){delete t.method}if(t.on){delete t.on}if(t.format){delete t.format}if(t.inputs){delete t.inputs}if(t.robjects){delete t.robjects}var l=deployr.io(e).data(t||{}).error(function(t){a.emit("deployR-io:failure",[t,e,o]);if(r.failure){r.failure.apply(s,[t,e,o])}a.emit("deployR-io:"+code,[t,e,o])});if(u){l.rinputs(d(u))}if(c){l.routputs(c)}if(i.sync){l.sync()}if(i.timeout){l.timeout(i.timeout)}if(n){for(var f in n){l.on("deployr-io:"+f,function(t){var r=n;var i=t.deployr.response.error;var a=t.deployr.response.errorCode;r[a].apply(s,[t,a,i,e,o])})}}a.emit("deployR-io:start");if(r.start){r.start.apply(s,[e,o])}l.end(function(t){a.emit("deployR-io:complete");if(r.complete){r.complete.apply(s,[t,e,o])}if(i.entity){t=p(t,i.entity)}a.emit("deployR-io:success",[t,e]);if(r.success){r.success.apply(s,[t,e,o])}a.emit("deployR-io:end",[t,e]);if(r.end){r.end.apply(s,[t,e,o])}});return l},parseInputs:function(e){return e},projectWorkspaceList:function(e,t){return this.io("/r/project/workspace/list",e,t)},projectWorkspaceGet:function(e,t){return this.io("/r/project/workspace/get",e,t)},projectWorkspaceUpload:function(e,t){e.format="text";var r={data:e,method:"POST",form:{id:e.formId},on:t};return this.io("/r/project/workspace/upload",e,t)},projectWorkspaceTransfer:function(e,t){return this.io("/r/project/workspace/transfer",e,t)},projectWorkspacePush:function(e,t){return this.io("/r/project/workspace/push",e,t)},projectWorkspaceSave:function(e,t){return this.io("/r/project/workspace/save",e,t)},projectWorkspaceStore:function(e,t){return this.io("/r/project/workspace/store",e,t)},projectWorkspaceLoad:function(e,t){return this.io("/r/project/workspace/load",e,t)},projectWorkspaceDelete:function(e,t){return this.io("/r/project/workspace/delete",e,t)},projectCreate:function(e,t){return this.io("/r/project/create",e,t)},projectPool:function(e,t){return this.io("/r/project/pool",e,t)},projectRecycle:function(e,t){return this.io("/r/project/recycle",e,t)},projectList:function(e,t){return this.io("/r/project/list",e,t)},projectPing:function(e,t){return this.io("/r/project/ping",e,t)},projectAbout:function(e,t){return this.io("/r/project/about",e,t)},projectAboutUpdate:function(e,t){return this.io("/r/project/about/update",e,t)},projectSave:function(e,t){return this.io("/r/project/save",e,t)},projectSaveas:function(e,t){return this.io("/r/project/saveas",e,t)},projectClose:function(e,t){return this.io("/r/project/close",e,t)},projectGrant:function(e,t){return this.io("/r/project/grant",e,t)},projectImport:function(e,t){e.format="text";var r={data:e,method:"POST",form:{id:e.formId},on:t};return this.io("/r/project/import",e,t)},projectExport:function(e,t){return this.io("/r/project/export",e,t)},projectDelete:function(e,t){return this.io("/r/project/delete",e,t)},projectExecuteCode:function(e,t){return this.io("/r/project/execute/code",e,t)},projectExecuteScript:function(e,t){return this.io("/r/project/execute/script",e,t)},projectExecuteInterrupt:function(e,t){return this.io("/r/project/execute/interrupt",e,t)},projectExecuteConsole:function(e,t){return this.io("/r/project/execute/console",e,t)},projectExecuteHistory:function(e,t){return this.io("/r/project/execute/history",e,t)},projectExecuteFlush:function(e,t){return this.io("/r/project/execute/flush",e,t)},projectExecuteResultList:function(e,t){return this.io("/r/project/execute/result/list",e,t)},projectExecuteResultDownload:function(e,t){return this.io("/r/project/execute/result/download",e,t)},projectExecuteResultDelete:function(e,t){return this.io("/r/project/execute/result/delete",e,t)},projectDirectoryList:function(e,t){return this.io("/r/project/directory/list",e,t)},projectDirectoryUpload:function(e,t){e.format="text";var r={data:e,method:"POST",form:{id:e.formId},on:t};return this.io("/r/project/directory/upload",e,t)},projectDirectoryTransfer:function(e,t){return this.io("/r/project/directory/transfer",e,t)},projectDirectoryWrite:function(e,t){return this.io("/r/project/directory/write",e,t)},projectDirectoryUpdate:function(e,t){return this.io("/r/project/directory/update",e,t)},projectDirectoryStore:function(e,t){return this.io("/r/project/directory/store",e,t)},projectDirectoryLoad:function(e,t){return this.io("/r/project/directory/load",e,t)},projectDirectoryDownload:function(e,t){return this.io("/r/project/directory/download",e,t)},projectDirectoryDelete:function(e,t){return this.io("/r/project/directory/delete",e,t)},projectPackageList:function(e,t){return this.io("/r/project/package/list",e,t)},projectPackageAttach:function(e,t){return this.io("/r/project/package/attach",e,t)},projectPackageDetach:function(e,t){return this.io("/r/project/package/detach",e,t)},userLogin:function(e,t){return this.io("/r/user/login",e,t)},userLogout:function(e,t){return this.io("/r/user/logout",e,t)},userAbout:function(e){return this.io("/r/user/about",{},e)},userAutosave:function(e,t){return this.io("/r/user/autosave",e,t)},repositoryScriptList:function(e){return this.io("/r/repository/script/list",{},e)},repositoryScriptExecute:function(e,t){return this.io("/r/repository/script/execute",e,t)},repositoryScriptRender:function(e,t){return this.io("/r/repository/script/render",e,t)},repositoryScriptInterrupt:function(e){return this.io("/r/repository/script/interrupt",config,e)},repositoryFileList:function(e,t){return this.io("/r/repository/file/list",e,t)},repositoryFileUpload:function(e,t){e.format="text";var r={data:e,method:"POST",form:{id:e.formId},on:t};return this.io("/r/repository/file/upload",e,t)},repositoryFileTransfer:function(e,t){return this.io("/r/repository/file/transfer",e,t)},repositoryFileWrite:function(e,t){return this.io("/r/repository/file/write",e,t)},repositoryFileUpdate:function(e,t){return this.io("/r/repository/file/update",e,t)},repositoryFileRevert:function(e,t){return this.io("/r/repository/file/revert",e,t)},repositoryFileDiff:function(e,t){return this.io("/r/repository/file/diff",e,t)},repositoryFileGrant:function(e,t){return this.io("/r/repository/file/grant",e,t)},repositoryFileDownload:function(e,t){return this.io("/r/repository/file/download",e,t)},repositoryFileDelete:function(e,t){return this.io("/r/repository/file/delete",e,t)},repositoryFileFetch:function(e,t){return this.io("/r/repository/file/fetch",e,t)},repositoryFileCopy:function(e,t){return this.io("/r/repository/file/copy",e,t)},repositoryFileMove:function(e,t){return this.io("/r/repository/file/move",e,t)},repositoryDirectoryList:function(e,t){return this.io("/r/repository/directory/list",e,t)},repositoryDirectoryCreate:function(e,t){return this.io("/r/repository/directory/create",e,t)},repositoryDirectoryRename:function(e,t){return this.io("/r/repository/directory/rename",e,t)},repositoryDirectoryCopy:function(e,t){return this.io("/r/repository/directory/copy",e,t)},repositoryDirectoryMove:function(e,t){return this.io("/r/repository/directory/move",e,t)},repositoryDirectoryUpdate:function(e,t){return this.io("/r/repository/directory/update",e,t)},repositoryDirectoryArchive:function(e,t){return this.io("/r/repository/directory/archive",e,t)},repositoryDirectoryUpload:function(e,t){e=e||{};e.format="text";var r={data:e,method:"POST",form:{id:e.formId},on:t};return this.io("/r/repository/directory/upload",e,t)},repositoryDirectoryDownload:function(e,t){return this.io("/r/repository/directory/download",e,t)},repositoryDirectoryDelete:function(e,t){return this.io("/r/repository/directory/delete",e,t)},jobList:function(e,t){return this.io("/r/job/list",e,t)},jobSubmit:function(e,t){return this.io("/r/job/submit",e,t)},jobSchedule:function(e,t){return this.io("/r/job/schedule",e,t)},jobQuery:function(e,t){return this.io("/r/job/query",e,t)},jobCancel:function(e,t){return this.io("/r/job/list",e,t)},jobDelete:function(e,t){return this.io("/r/job/delete",e,t)}}};t.exports=s},{"../package":22,"./lang":7,"./rinput":11,"./selfish":14}],4:[function(e,t,r){var i=e("./selfish").Base;function o(e){}t.exports=i.extend({initialize:function(){this.events={};this.scope=null},on:function(e,t){if(e in this.events===false){this.events[e]=[]}this.events[e].push(t);o('Emitter.on("'+e+'")');return this},emit:function(e){if(e in this.events===false){return this}for(var t=0;t<this.events[e].length;t++){o('Fired event: "'+e+'"');this.events[e][t].apply(this.scope||this,Array.prototype.slice.call(arguments,1))}return this},offAll:function(e){if(!e){for(var t in this.events){delete this.events[t]}}else{if(e in this.events===false){return this}delete this.events[e]}return this},offAt:function(e,t){var r=this.events[e],i=r.slice(t+1);r.length=t;r.push.apply(r,i);this.events[e]=r},off:function(e,t){if(e in this.events===false){return this}if(!t){return this.offAll(e)}else{for(var r=0;r<this.events[e].length;r++){if(this.events[e][r]==t){this.offAt(e,r);return this}}}return this}})},{"./selfish":14}],5:[function(e,t,r){var i=e("./lang"),o=e("./rtypes"),n=o.r,s=o.deployr;function a(e,t){var r=[];for(var i=0;i<e.length;i++){r.push(c(e[i],t))}return r}function c(e,t){var r=e.getFullYear(),i=e.getMonth()+1,o=e.getDate(),n=e.getHours(),a=e.getMinutes(),c=e.getSeconds(),u=e.getTimezoneOffset(),l="";i=i<10?"0"+i:i;n=n<10?"0"+n:n;a=a<10?"0"+a:a;c=c<10?"0"+c:c;l=r+"-"+i+"-"+o;function p(e,t,r){var i=""+Math.abs(e),o=e>=0;while(i.length<t){i="0"+i}return(o?r?"+":"":"-")+i}if(t===s.RPOSIX_DATE||t===s.RPOSIX_DATE_VECTOR){var f=n+":"+a+":"+c,h=-u,d="+";if(h<0){h=-h;d="-"}u=d+p(h/60,2)+""+p(h%60,2);l+=" "+f+" "+u}return l}function u(e,t){var r=e.value;for(var n=0;n<r.length;n++){var l=r[n];if(l.type===s.RDATAFRAME){t=u(l,t)}else{if(o.isDate(l.type)){if(i.isArray(l.value)){l.value=a(l.value,l.type)}else{l.value=c(l.value,l.type)}}l.type=o.deployrToR(l.type);t.value.push(l)}}return t}function l(e){var t={type:n.DATAFRAME,value:[],name:e.name
},r=e.value;for(var l=0;l<r.length;l++){var p=r[l];if(p.type===s.RDATAFRAME){t=u(p,t)}else{if(o.isDate(p.type)){if(i.isArray(p.value)){p.value=a(p.value,p.type)}else{p.value=c(p.value,p.type)}}p.type=o.deployrToR(p.type);t.value.push(p)}}return t}function p(e){var t={type:n.LIST,value:[],name:e.name},r=e.value,i;for(var o=0;o<r.length;o++){var u=r[o];switch(u.type){case s.RDATAFRAME:i=l(u);break;case s.RLIST:i=p(u);break;case s.RNUMERIC_MATRIX:case s.RINTEGER_MATRIX:case s.RBOOLEAN_MATRIX:case s.RSTRING_MATRIX:i={name:u.name,type:n.MATRIX,value:u.value};break;case s.RDATE:case s.RPOSIX_DATE:i={name:u.name,type:n.DATE,format:u.format,value:c(u.value,u.type)};break;case s.RFACTOR:case s.RORDERED:i={name:u.name,type:n.FACTOR,ordered:u.ordered,labels:u.labels,levels:u.levels,value:u.value};break;case s.RSTRING:case s.RBOOLEAN:case s.RNUMERIC:case s.RINTEGER:i={name:u.name,type:n.PRIMITIVE,value:u.value};break;case s.RNUMERIC_VECTOR:case s.RINTEGER_VECTOR:case s.RBOOLEAN_VECTOR:case s.RSTRING_VECTOR:i={name:u.name,type:n.VECTOR,value:u.value};break;case s.RDATE_VECTOR:case s.RPOSIX_DATE_VECTOR:i={name:u.name,type:n.VECTOR,value:a(u.value,u.type),format:u.format};break;default:throw new Error('No RDataType found for "'+u.type+'"');break}t.value.push(i)}return t}t.exports={encode:function(e){var t={};for(var r=0;r<e.length;r++){var i=e[r];switch(i.type){case s.RDATAFRAME:t[i.name]=l(i);break;case s.RLIST:t[i.name]=p(i);break;case s.RNUMERIC_MATRIX:case s.RINTEGER_MATRIX:case s.RBOOLEAN_MATRIX:case s.RSTRING_MATRIX:t[i.name]={type:n.MATRIX,value:i.value};break;case s.RDATE:case s.RPOSIX_DATE:t[i.name]={type:n.DATE,format:i.format,value:c(i.value,i.type)};break;case s.RFACTOR:case s.RORDERED:t[i.name]={type:n.FACTOR,ordered:i.ordered,labels:i.labels,levels:i.levels,value:i.value};break;case s.RSTRING:case s.RBOOLEAN:case s.RNUMERIC:case s.RINTEGER:t[i.name]={type:n.PRIMITIVE,value:i.value};break;case s.RNUMERIC_VECTOR:case s.RINTEGER_VECTOR:case s.RBOOLEAN_VECTOR:case s.RSTRING_VECTOR:t[i.name]={type:n.VECTOR,value:i.value};break;case s.RDATE_VECTOR:case s.RPOSIX_DATE_VECTOR:t[i.name]={type:n.VECTOR,value:a(i.value,i.type),format:i.format};break;default:throw new Error('No RDataType found for "'+i.type+'"');break}}return JSON.stringify(t)}}},{"./lang":7,"./rtypes":13}],6:[function(e,t,r){var i=e("./optional"),o=i("ws"),n=e("./queue"),s=e("./emitter"),a=e("./selfish").Base,c=e("./utils").merge;var u=a.extend(s,{initialize:function l(e,t){s.initialize.call(this,{});this.host=e;this.options=t||{};this.options.log=this.options.log||this.LOG.error;this.ws=null;this.q=new n;this.channel={}},LOG:{info:"info",debug:"debug",error:"error"},open:function(e){var t=this,r=(this.host||"")+"/deployr/r/event/stream?",i=[];e=e||{};e.headers=e.headers||{};e=this.options=c(e,this.channel);this.cookies=!this.cookies?e.headers.Cookie:this.cookies;if(e.project){i.push("project="+e.project)}else{if(e.job){i.push("job="+e.job)}}if(e.management){i.push("managementEventOnly=true")}else{if(e.httponly){i.push("httpEventOnly=true")}else{if(e.revoonly){i.push("revoEventOnly=true")}}}r+=i.join("&").substr(0);r=r.replace(/^http/,"ws");this.q.yield(true);this.q.add(function(){var e=this.cookies?{Cookie:this.cookies}:{};this.emit("es:connecting",{uri:r,headers:e});var i=new o(r,"http",{headers:e});i.onopen=function(e){t.emit("es:open",e)};var n="";i.onmessage=function(e){try{if(e.data.split("!|!")[1]){n=n+e.data.split("!|!")[1];e=JSON.parse(n);n="";var r=e.deployr.response.event.type;t.emit("es:"+r.replace("Event",""),e)}}catch(i){}};i.onerror=function(e){t.emit("es:error",e)};i.onclose=function(e){t.emit("es:disconnect",e)};this.ws=i},this);if(e.force){this.flush()}return this},close:function(){if(this.ws){this.ws.close()}return this},error:function(e){this.on("es:error",e);return this},all:function(){this.channel={revoonly:true};return this},session:function(){this.channel={httponly:true};return this},project:function(e){this.channel={project:e};return this},job:function(e){this.channel={job:e};return this},management:function(){this.channel={management:true};return this},flush:function(){this.q.yield(false);this.q.flush()},share:function(e){this.cookies=e}});t.exports=u},{"./emitter":4,"./optional":9,"./queue":10,"./selfish":14,"./utils":15}],7:[function(e,t,r){var i={},o=Object.prototype.toString,n={undefined:"undefined",number:"number","boolean":"boolean",string:"string","[object Function]":"function","[object RegExp]":"regexp","[object Array]":"array","[object Date]":"date","[object Error]":"error"},s=false;i.isNull=function(e){return e===null};i.isUndefined=function(e){return typeof e==="undefined"};i.isObject=function(e,t){var r=typeof e;return e&&(r==="object"||!t&&(r==="function"||i.isFunction(e)))||false};i.isArray=!s&&Array.isArray||function(e){return i.type(e)==="array"};i.isFunction=function a(e){return typeof e==="function"};i.isBoolean=function(e){return typeof e==="boolean"};i.isDate=function(e){return i.type(e)==="date"&&e.toString()!=="Invalid Date"&&!isNaN(e)};i.isNumber=function(e){return typeof e==="number"&&isFinite(e)};i.isString=function(e){return typeof e==="string"};i.type=function(e){return n[typeof e]||n[o.call(e)]||(e?"object":"null")};t.exports=i},{}],8:[function(e,t,r){var i={},o={},n;function s(e,t){if(!console){return}function r(e){var t="========================================================="+"=========================================================\n",r=0;if(e===i.DEBUG||e===i.ERROR)r=8;else if(e===i.INFO||e===i.WARN)r=8;else r=7;return{start:t.substring(r),end:t}}var o,n=Array.prototype.slice.call(e,0),s=t.name,a=t.level===i.ERROR,c=r(t.level);if(t.level===i.WARN&&console.warn){o="warn"}else if(t.level===i.ERROR&&console.error){o="error"}else if(t.level===i.INFO&&console.info){o="info"}else{o="log"}n.unshift("["+(a?i.ERROR.name:s)+"] "+c.start);n.push(c.end);console[o](n[0],[n[1]+" ---> "+n[2]["call"]]);for(var u=2;u<n.length;u++){console.log(n[u])}}function a(e,t,r){this.id=e;this.context=t||i.DEBUG}a.prototype={log:function(e,t){if(e.value>=this.context.value){s(t,{level:e,name:this.context.name,value:this.context.value})}},debug:function(){this.log(i.DEBUG,arguments)},error:function(){this.log(i.ERROR,arguments)},info:function(){this.log(i.INFO,arguments)},warn:function(){this.log(i.WARN,arguments)},setLevel:function(e){if(e&&"value"in e){this.context=e}}};i.DEBUG={value:1,name:"DEBUG"};i.INFO={value:2,name:"INFO"};i.WARN={value:4,name:"WARN"};i.ERROR={value:8,name:"ERROR"};i.OFF={value:99,name:"OFF"};i.setLevel=function(e){n.setLevel(e)};i.debug=function(){n.debug.apply(n,arguments)};i.info=function(){n.info.apply(n,arguments)};i.warn=function(){n.warn.apply(n,arguments)};i.error=function(){n.error.apply(n,arguments)};i.get=function(e,t,r){return o[e]||function(){o[e]=new a(e,t,r);return o[e]}()};n=i.get("global");t.exports=i},{}],9:[function(e,t,r){t.exports=function(t){try{return e(t)}catch(r){}}},{}],10:[function(e,t,r){function i(){this.emptyCallback=null;this.callbacks=[];this.yielded=false;this.response=null;this.responseChain=[]}i.prototype={add:function(e,t,r){if(!this.yielded&&!r){e.apply(t||this,[this.response])}else{this.callbacks.push({fn:e,ctx:t})}},size:function(){return this.callbacks.length},isEmpty:function(){return this.callbacks.length===0},empty:function(e,t){this.emptyCallback={fn:e,ctx:t}},"yield":function(e){this.yielded=e},take:function(e,t,r){var i;if(e){this.response=e;this.responseChain.push(e)}if(!this.yielded&&this.callbacks[0]){i=this.callbacks.shift();i.fn.apply(i.ctx||this,[this.responseChain,t,r]);if(this.callbacks[0]&&this.emptyCallback){this.emptyCallback.fn.call(this.emptyCallback.ctx||this)}}},flush:function(e,t,r){if(e){this.response=e;this.responseChain.push(e)}while(this.callbacks[0]){if(this.yielded){break}var i=this.callbacks.shift();i.fn.apply(i.ctx||this,[this.responseChain,t,r]);if(this.callbacks[0]&&this.emptyCallback){this.emptyCallback.fn.call(this.emptyCallback.ctx||this)}}}};t.exports=i},{}],11:[function(e,t,r){var i=e("./selfish").Base,o=e("./rtypes");t.exports=i.extend(o,{initialize:function n(e,t,r){this.name=e;this.value=t;this.options=r||{}},numeric:function(){return this.assert({type:this.deployr.RNUMERIC,name:this.name,value:this.value,toString:this.toString})},integer:function(){return this.assert({type:this.deployr.RINTEGER,name:this.name,value:this.value,toString:this.toString})},logical:function(){return this.assert({type:this.deployr.RBOOLEAN,name:this.name,value:this.value,toString:this.toString})},character:function(){return this.assert({type:this.deployr.RSTRING,name:this.name,value:this.value,toString:this.toString})},date:function(){return this.assert({type:this.deployr.RDATE,name:this.name,value:this.value,format:"yyyy-MM-dd",toString:this.toString})},posixct:function(){return this.assert({type:this.deployr.RPOSIX_DATE,name:this.name,value:this.value,format:"yyyy-MM-dd HH:mm:ss Z",toString:this.toString})},numericVector:function(){return this.assert({type:this.deployr.RNUMERIC_VECTOR,name:this.name,value:this.value,toString:this.toString})},integerVector:function(){return this.assert({type:this.deployr.RINTEGER_VECTOR,name:this.name,value:this.value,toString:this.toString})},logicalVector:function(){return this.assert({type:this.deployr.RBOOLEAN_VECTOR,name:this.name,value:this.value,toString:this.toString})},characterVector:function(){return this.assert({type:this.deployr.RSTRING_VECTOR,name:this.name,value:this.value,toString:this.toString})},dateVector:function(){return this.assert({type:this.deployr.RDATE_VECTOR,name:this.name,value:this.value,format:"yyyy-MM-dd",toString:this.toString})},posixctVector:function(){return this.assert({type:this.deployr.RPOSIX_DATE_VECTOR,name:this.name,value:this.value,format:"yyyy-MM-dd HH:mm:ss Z",toString:this.toString})},list:function(){return this.assert({type:this.deployr.RLIST,name:this.name,value:this.value,toString:this.toString})},dataframe:function(){return this.assert({type:this.deployr.RDATAFRAME,name:this.name,value:this.value,toString:this.toString})},factor:function(){var e=this.options;return this.assert({type:this.deployr.RFACTOR,name:this.name,value:this.value,ordered:false,levels:e.levels,labels:e.labels,toString:this.toString})},ordered:function(){var e=this.options;return this.assert({type:this.deployr.RORDERED,name:this.name,value:this.value,ordered:true,levels:e.levels,labels:e.labels,toString:this.toString})},numericMatrix:function(){return this.assert({type:this.deployr.RNUMERIC_MATRIX,name:this.name,value:this.value,toString:this.toString})},integerMatrix:function(){return this.assert({type:this.deployr.RINTEGER_MATRIX,name:this.name,value:this.value,toString:this.toString})},logicalMatrix:function(){return this.assert({type:this.deployr.RBOOLEAN_MATRIX,name:this.name,value:this.value,toString:this.toString})},characterMatrix:function(){return this.assert({type:this.deployr.RSTRING_MATRIX,name:this.name,value:this.value,toString:this.toString})},toString:function(){var e=this.options||{},t=e.levels?"[ levels = "+e.levels+"]":"",r=e.labels?"[ labels = "+e.labels+"]":"";return"[ name = "+this.name+" ] "+"[ value = "+this.value+" ] "+"[ type = "+this.type+" ] "+t+r}})},{"./rtypes":13,"./selfish":14}],12:[function(e,t,r){var i=e("./selfish").Base,o=e("./rtypes"),n=e("./lang"),s=e("./rinput");function a(e,t,r,i){var o;if(n.isObject(t)){o=t;if(!o.type!==e){throw new Error("IllegalArgumentError:"+'Expecting "'+e+'" but found "'+o.type+'"')}}else{o=s.new(t,r,i)[e]()}return o}t.exports=i.extend(o,{numeric:function(e,t){this.inputs.push(a(this.deployr.RNUMERIC,e,t));return this},integer:function(e,t){this.inputs.push(a(this.deployr.RINTEGER,e,t));return this},logical:function(e,t){this.inputs.push(a(this.deployr.RBOOLEAN,e,t));return this},character:function(e,t){this.inputs.push(a(this.deployr.RSTRING,e,t));return this},date:function(e,t){this.inputs.push(a(this.deployr.RDATE,e,t));return this},posixct:function(e,t){this.inputs.push(a(this.deployr.RPOSIX_DATE,e,t));return this},numericVector:function(e,t){this.inputs.push(a(this.deployr.RNUMERIC_VECTOR,e,t));return this},integerVector:function(e,t){this.inputs.push(a(this.deployr.RINTEGER_VECTOR,e,t));return this},logicalVector:function(e,t){this.inputs.push(a(this.deployr.RBOOLEAN_VECTOR,e,t));return this},characterVector:function(e,t){this.inputs.push(a(this.deployr.RSTRING_VECTOR,e,t));return this},dateVector:function(e,t){this.inputs.push(a(this.deployr.RDATE_VECTOR,e,t));return this},posixctVector:function(e,t){this.inputs.push(a(this.deployr.RPOSIX_DATE_VECTOR,e,t));return this},list:function(e,t){this.inputs.push(a(this.deployr.RLIST,e,t));return this},dataframe:function(e,t){this.inputs.push(a(this.deployr.RDATAFRAME,e,t));return this},factor:function(e,t,r,i){var o={levels:r,labels:i};this.inputs.push(a(this.deployr.RFACTOR,e,t,o));return this},ordered:function(e,t,r,i){var o={levels:r,labels:i};this.inputs.push(a(this.deployr.RORDERED,e,t,o));return this},numericMatrix:function(e,t){this.inputs.push(a(this.deployr.RNUMERIC_MATRIX,e,t));return this},integerMatrix:function(e,t){this.inputs.push(a(this.deployr.RINTEGER_MATRIX,e,t));return this},logicalMatrix:function(e,t){this.inputs.push(a(this.deployr.RBOOLEAN_MATRIX,e,t));return this},characterMatrix:function(e,t){this.inputs.push(a(this.deployr.RSTRING_MATRIX,e,t));return this}})},{"./lang":7,"./rinput":11,"./rtypes":13,"./selfish":14}],13:[function(e,t,r){var i=e("./selfish").Base,o=e("./lang"),n={};t.exports=i.extend({r:{PRIMITIVE:"primitive",DATAFRAME:"dataframe",LIST:"list",MATRIX:"matrix",DATE:"date",FACTOR:"factor",VECTOR:"vector"},deployr:{RBOOLEAN:"logical",RNUMERIC:"numeric",RINTEGER:"integer",RSTRING:"character",RDATE:"date",RPOSIX_DATE:"posixct",RBOOLEAN_VECTOR:"logicalVector",RNUMERIC_VECTOR:"numericVector",RINTEGER_VECTOR:"integerVector",RSTRING_VECTOR:"characterVector",RDATE_VECTOR:"dateVector",RPOSIX_DATE_VECTOR:"posixctVector",RLIST:"list",RDATAFRAME:"dataframe",RFACTOR:"factor",RORDERED:"ordered",RBOOLEAN_MATRIX:"logicalMatrix",RNUMERIC_MATRIX:"numericMatrix",RINTEGER_MATRIX:"integerMatrix",RSTRING_MATRIX:"characterMatrix"},isDate:function(e){return e===this.deployr.RDATE||e===this.deployr.RPOSIX_DATE||e===this.deployr.RDATE_VECTOR||e===this.deployr.RPOSIX_DATE_VECTOR||e===this.r.DATE},deployrToR:function(e){var t=this.deployr,r=this.r;if(!n[e]){n[t.RBOOLEAN]=r.PRIMITIVE;n[t.RNUMERIC]=r.PRIMITIVE;n[t.RINTEGER]=r.PRIMITIVE;n[t.RSTRING]=r.PRIMITIVE;n[t.RDATE]=r.DATE;n[t.RPOSIX_DATE]=r.DATE;n[t.RBOOLEAN_VECTOR]=r.VECTOR;n[t.RNUMERIC_VECTOR]=r.VECTOR;n[t.RINTEGER_VECTOR]=r.VECTOR;n[t.RSTRING_VECTOR]=r.VECTOR;n[t.RDATE_VECTOR]=r.VECTOR;n[t.RPOSIX_DATE_VECTOR]=r.VECTOR;n[t.RLIST]=r.LIST;n[t.RDATAFRAME]=r.DATAFRAME;n[t.RFACTOR]=r.FACTOR;n[t.RORDERED]=r.FACTOR;n[t.RBOOLEAN_MATRIX]=r.MATRIX;n[t.RNUMERIC_MATRIX]=r.MATRIX;n[t.RINTEGER_MATRIX]=r.MATRIX;n[t.RSTRING_MATRIX]=r.MATRIX}return n[e]},assert:function(e){var t=this.deployr,r=null,i=e.value,n;i=!o.isArray(i)?[i]:i;for(var s=0;s<i.length;s++){var a=i[s];switch(e.type){case t.RNUMERIC:case t.RNUMERIC_VECTOR:case t.RNUMERIC_VECTOR:n=o.isNumber;var c=parseFloat(a);a=isNaN(c)?a:c;break;case t.RINTEGER:case t.RINTEGER_VECTOR:n=o.isNumber;var c=parseFloat(a);a=isNaN(c)?a:c;break;case t.RBOOLEAN:case t.RBOOLEAN_VECTOR:n=o.isBoolean;break;case t.RSTRING:case t.RSTRING_VECTOR:n=o.isString;break;case t.RDATE:case t.RPOSIX_DATE:case t.RDATE_VECTOR:case t.RPOSIX_DATE_VECTOR:n=o.isDate;break;case t.RFACTOR:case t.RORDERED:case t.RDATAFRAME:case t.RINTEGER_MATRIX:case t.RBOOLEAN_MATRIX:case t.RSTRING_MATRIX:n=r;break}if(n&&!n(a)){throw new Error("RInputFormatError: "+'"'+a+'" is not a valid "'+e.type+'" type.')}}return e}})},{"./lang":7,"./selfish":14}],14:[function(t,r,i){!(typeof e!=="function"?function(e){e(null,typeof i!=="undefined"?i:window)}:e)(function(e,t){"use strict";t.Base=Object.freeze(Object.create(Object.prototype,{"new":{value:function r(){var e=Object.create(this);e.initialize.apply(e,arguments);return e}},initialize:{value:function i(){}},merge:{value:function o(){var e={};Array.prototype.forEach.call(arguments,function(t){Object.getOwnPropertyNames(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)})});Object.defineProperties(this,e);return this}},extend:{value:function n(){return Object.freeze(this.merge.apply(Object.create(this),arguments))}}}))})},{}],15:[function(e,t,r){var i=e("./lang");var o=r.get=function(e,t){function r(e,t,i){for(var o in e){var n=t.apply(this,[o,e[o],i]);if(n){return n}else{if(e[o]instanceof Object&&!(e[o]instanceof Array)){r(e[o],t,o)}}}}function o(e,t){var i={};r(e,function(e,r,o){if(e===t){i=r;return i}else{return null}});return i}function n(e){for(var t in e){if(e.hasOwnProperty(t))return e}return!i.isObject(e)?e:null}return n(o(e,t))};var n=r.inArray=function(e,t,r){var i,o=e.length;for(i=0;i<o;i++){if(r){if(e[i][r]===t){return e[i]}}else{if(e[i]===t){return e[i]}}}return null};r.merge=function(e,t){if(!e||typeof e!=="object"){e={}}if(!t||typeof t!=="object"){t={}}for(var r in t){e[r]=t[r]}return e};r.workspace=function(e,t){var r=o(e,"workspace");return r?t?n(r.objects,t,"name"):r.objects||r.object:null};r.signature=function(){var e=Array.prototype.slice.call(arguments["0"],0),t=e.length,r=false,o={},n;if(t===1&&i.isObject(e[0])){o=e[0];n=o.project?"/r/project/execute/script":"/r/repository/script/execute"}else if(t===1&&i.isString(e[0])){e=e[0].split("/");n="/r/repository/script/execute";o={author:e[1],directory:e[2],filename:e[3]}}else if(t===2){var s=e[1];n=s?"/r/project/execute/script":"/r/repository/script/execute";e=e[0].split("/");o={project:s,author:e[1],directory:e[2],filename:e[3]}}else if(t>2){o={author:e[2],directory:e[1],filename:e[0]}}if(o.project&&i.isBoolean(o.project)){delete o["project"];r=true}return{api:n,opts:o,create:r}}},{"./lang":7}],16:[function(e,t,r){},{}],17:[function(e,t,r){var i=t.exports={};var o=[];var n=false;function s(){if(n){return}n=true;var e;var t=o.length;while(t){e=o;o=[];var r=-1;while(++r<t){e[r]()}t=o.length}n=false}i.nextTick=function(e){o.push(e);if(!n){setTimeout(s,0)}};i.title="browser";i.browser=true;i.env={};i.argv=[];i.version="";i.versions={};function a(){}i.on=a;i.addListener=a;i.once=a;i.off=a;i.removeListener=a;i.removeAllListeners=a;i.emit=a;i.binding=function(e){throw new Error("process.binding is not supported")};i.cwd=function(){return"/"};i.chdir=function(e){throw new Error("process.chdir is not supported")};i.umask=function(){return 0}},{}],18:[function(e,t,r){(function(e){(function(r){"use strict";var i,o=function(e){return typeof e==="function"},n=function(e){return Array.isArray?Array.isArray(e):e instanceof Array},s=function(e){return!!(e&&(typeof e).match(/function|object/))},a=function(e){return e===false||e===r||e===null},c=function(e,t){return[].slice.call(e,t)},u="undefined",l=typeof TypeError===u?Error:TypeError;if(typeof e!==u&&e.nextTick){i=e.nextTick}else if(typeof MessageChannel!==u){var p=new MessageChannel,f=[];p.port1.onmessage=function(){f.length&&f.shift()()};i=function(e){f.push(e);p.port2.postMessage(0)}}else{i=function(e){setTimeout(e,0)}}function h(e){i(function(){throw e})}function d(e){return this.then(e,r)}function y(e){return this.then(r,e)}function m(e,t){return this.then(function(t){return o(e)?e.apply(null,n(t)?t:[t]):j.onlyFuncs?t:e},t||r)}function v(e){function t(){e()}this.then(t,t);return this}function R(e){return this.then(function(t){return o(e)?e.apply(null,n(t)?t.splice(0,0,undefined)&&t:[undefined,t]):j.onlyFuncs?t:e},function(t){return e(t)})}function g(e){return this.then(r,e?function(t){e(t);throw t}:h)}var j=function(e){var t=(r!==e?e:j.alwaysAsync)?i:function(e){e()},n=0,c=[],u,p={then:function(e,r){var i=j();c.push([function(t){try{if(a(e)){i.resolve(t)}else{i.resolve(o(e)?e(t):j.onlyFuncs?t:e)}}catch(r){i.reject(r)}},function(e){if(a(r)||!o(r)&&j.onlyFuncs){i.reject(e)}if(r){try{i.resolve(o(r)?r(e):r)}catch(t){i.reject(t)}}}]);n!==0&&t(f);return i.promise},success:d,error:y,otherwise:y,apply:m,spread:m,ensure:v,nodify:R,rethrow:g,isPending:function(){return!!(n===0)},getStatus:function(){return n}};p.toSource=p.toString=p.valueOf=function(){return u===r?this:u};function f(){if(n===0){return}var e=c,t=0,r=e.length,i=~n?0:1,o;c=[];for(;t<r;t++){(o=e[t][i])&&o(u)}}function h(e){var r=false;function i(e){return function(t){if(r){return undefined}else{r=true;return e(t)}}}if(n){return this}try{var a=s(e)&&e.then;if(o(a)){if(e===p){throw new l("Promise can't resolve itself")}a.call(e,i(h),i(T));return this}}catch(c){i(T)(c);return this}t(function(){u=e;n=1;f()});return this}function T(e){n||t(function(){try{throw e}catch(t){u=t}n=-1;f()});return this}return{promise:p,resolve:h,fulfill:h,reject:T}};j.deferred=j.defer=j;j.nextTick=i;j.alwaysAsync=true;j.onlyFuncs=true;j.resolved=j.fulfilled=function(e){return j(true).resolve(e).promise};j.rejected=function(e){return j(true).reject(e).promise};j.wait=function(e){var t=j();setTimeout(t.resolve,e||0);return t.promise};j.delay=function(e,t){var r=j();setTimeout(function(){try{r.resolve(e.apply(null))}catch(t){r.reject(t)}},t||0);return r.promise};j.promisify=function(e){if(e&&o(e.then)){return e}return j.resolved(e)};function T(e,t){var r=c(e);if(r.length===1&&n(r[0])){if(!r[0].length){return j.fulfilled([])}r=r[0]}var i=[],o=j(),s=r.length;if(!s){o.resolve(i)}else{var a=function(e){r[e]=j.promisify(r[e]);r[e].then(function(n){if(!(e in i)){i[e]=t?r[e]:n;--s||o.resolve(i)}},function(n){if(!(e in i)){if(!t){o.reject(n)}else{i[e]=r[e];--s||o.resolve(i)}}})};for(var u=0,l=s;u<l;u++){a(u)}}return o.promise}j.all=function(){return T(arguments,false)};j.resolveAll=function(){return T(arguments,true)};j.nodeCapsule=function(e,t){if(!t){t=e;e=void 0}return function(){var r=j(),i=c(arguments);i.push(function(e,t){e?r.reject(e):r.resolve(arguments.length>2?c(arguments,1):t)});try{t.apply(e,i)}catch(o){r.reject(o)}return r.promise}};typeof window!==u&&(window.D=j);typeof t!==u&&t.exports&&(t.exports=j)})()}).call(this,e("_process"))},{_process:17}],19:[function(e,t,r){var i=e("emitter");var o=e("reduce");var n="undefined"==typeof window?this:window;function s(){}function a(e){var t={}.toString.call(e);switch(t){case"[object File]":case"[object Blob]":case"[object FormData]":return true;default:return false}}function c(){if(n.XMLHttpRequest&&("file:"!=n.location.protocol||!n.ActiveXObject)){return new XMLHttpRequest}else{try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}}return false}var u="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function l(e){return e===Object(e)}function p(e){if(!l(e))return e;var t=[];for(var r in e){if(null!=e[r]){t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]))}}return t.join("&")}R.serializeObject=p;function f(e){var t={};var r=e.split("&");var i;var o;for(var n=0,s=r.length;n<s;++n){o=r[n];i=o.split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}R.parseString=f;R.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"};R.serialize={"application/x-www-form-urlencoded":p,"application/json":JSON.stringify};R.parse={"application/x-www-form-urlencoded":f,"application/json":JSON.parse};function h(e){var t=e.split(/\r?\n/);var r={};var i;var o;var n;var s;t.pop();for(var a=0,c=t.length;a<c;++a){o=t[a];i=o.indexOf(":");n=o.slice(0,i).toLowerCase();s=u(o.slice(i+1));r[n]=s}return r}function d(e){return e.split(/ *; */).shift()}function y(e){return o(e.split(/ *; */),function(e,t){var r=t.split(/ *= */),i=r.shift(),o=r.shift();if(i&&o)e[i]=o;return e},{})}function m(e,t){t=t||{};this.req=e;this.xhr=this.req.xhr;this.text=this.req.method!="HEAD"?this.xhr.responseText:null;this.setStatusProperties(this.xhr.status);this.header=this.headers=h(this.xhr.getAllResponseHeaders());this.header["content-type"]=this.xhr.getResponseHeader("content-type");this.setHeaderProperties(this.header);this.body=this.req.method!="HEAD"?this.parseBody(this.text):null}m.prototype.get=function(e){return this.header[e.toLowerCase()]};m.prototype.setHeaderProperties=function(e){var t=this.header["content-type"]||"";this.type=d(t);var r=y(t);for(var i in r)this[i]=r[i]};m.prototype.parseBody=function(e){var t=R.parse[this.type];return t&&e&&e.length?t(e):null};m.prototype.setStatusProperties=function(e){var t=e/100|0;this.status=e;this.statusType=t;this.info=1==t;this.ok=2==t;this.clientError=4==t;this.serverError=5==t;this.error=4==t||5==t?this.toError():false;this.accepted=202==e;this.noContent=204==e||1223==e;this.badRequest=400==e;this.unauthorized=401==e;this.notAcceptable=406==e;this.notFound=404==e;this.forbidden=403==e};m.prototype.toError=function(){var e=this.req;var t=e.method;var r=e.url;var i="cannot "+t+" "+r+" ("+this.status+")";var o=new Error(i);o.status=this.status;o.method=t;o.url=r;return o};R.Response=m;function v(e,t){var r=this;i.call(this);this._query=this._query||[];this.method=e;this.url=t;this.header={};this._header={};this.on("end",function(){var e=null;var t=null;try{t=new m(r)}catch(i){e=new Error("Parser is unable to parse the response");e.parse=true;e.original=i}r.callback(e,t)})}i(v.prototype);v.prototype.use=function(e){e(this);return this};v.prototype.timeout=function(e){this._timeout=e;return this};v.prototype.clearTimeout=function(){this._timeout=0;clearTimeout(this._timer);return this};v.prototype.abort=function(){if(this.aborted)return;this.aborted=true;this.xhr.abort();this.clearTimeout();this.emit("abort");return this};v.prototype.set=function(e,t){if(l(e)){for(var r in e){this.set(r,e[r])}return this}this._header[e.toLowerCase()]=t;this.header[e]=t;return this};v.prototype.unset=function(e){delete this._header[e.toLowerCase()];delete this.header[e];return this};v.prototype.getHeader=function(e){return this._header[e.toLowerCase()]};v.prototype.type=function(e){this.set("Content-Type",R.types[e]||e);return this};v.prototype.accept=function(e){this.set("Accept",R.types[e]||e);return this};v.prototype.auth=function(e,t){var r=btoa(e+":"+t);this.set("Authorization","Basic "+r);return this};v.prototype.query=function(e){if("string"!=typeof e)e=p(e);if(e)this._query.push(e);return this};v.prototype.field=function(e,t){if(!this._formData)this._formData=new FormData;this._formData.append(e,t);return this};v.prototype.attach=function(e,t,r){if(!this._formData)this._formData=new FormData;this._formData.append(e,t,r);return this};v.prototype.send=function(e){var t=l(e);var r=this.getHeader("Content-Type");if(t&&l(this._data)){for(var i in e){this._data[i]=e[i]}}else if("string"==typeof e){if(!r)this.type("form");r=this.getHeader("Content-Type");if("application/x-www-form-urlencoded"==r){this._data=this._data?this._data+"&"+e:e}else{this._data=(this._data||"")+e}}else{this._data=e}if(!t)return this;if(!r)this.type("json");return this};v.prototype.callback=function(e,t){var r=this._callback;this.clearTimeout();if(2==r.length)return r(e,t);if(e)return this.emit("error",e);r(t)};v.prototype.crossDomainError=function(){var e=new Error("Origin is not allowed by Access-Control-Allow-Origin");e.crossDomain=true;this.callback(e)};v.prototype.timeoutError=function(){var e=this._timeout;var t=new Error("timeout of "+e+"ms exceeded");t.timeout=e;this.callback(t)};v.prototype.withCredentials=function(){this._withCredentials=true;return this};v.prototype.end=function(e){var t=this;var r=this.xhr=c();var i=this._query.join("&");var o=this._timeout;var n=this._formData||this._data;this._callback=e||s;r.onreadystatechange=function(){if(4!=r.readyState)return;if(0==r.status){if(t.aborted)return t.timeoutError();return t.crossDomainError()}t.emit("end")};if(r.upload){r.upload.onprogress=function(e){e.percent=e.loaded/e.total*100;t.emit("progress",e)}}if(o&&!this._timer){this._timer=setTimeout(function(){t.abort()},o)}if(i){i=R.serializeObject(i);this.url+=~this.url.indexOf("?")?"&"+i:"?"+i}r.open(this.method,this.url,true);if(this._withCredentials)r.withCredentials=true;if("GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof n&&!a(n)){var u=R.serialize[this.getHeader("Content-Type")];if(u)n=u(n)}for(var l in this.header){if(null==this.header[l])continue;r.setRequestHeader(l,this.header[l])}this.emit("request",this);r.send(n);return this};R.Request=v;function R(e,t){if("function"==typeof t){return new v("GET",e).end(t)}if(1==arguments.length){return new v("GET",e)}return new v(e,t)}R.get=function(e,t,r){var i=R("GET",e);if("function"==typeof t)r=t,t=null;if(t)i.query(t);if(r)i.end(r);return i};R.head=function(e,t,r){var i=R("HEAD",e);if("function"==typeof t)r=t,t=null;if(t)i.send(t);if(r)i.end(r);return i};R.del=function(e,t){var r=R("DELETE",e);if(t)r.end(t);return r};R.patch=function(e,t,r){var i=R("PATCH",e);if("function"==typeof t)r=t,t=null;if(t)i.send(t);if(r)i.end(r);return i};R.post=function(e,t,r){var i=R("POST",e);if("function"==typeof t)r=t,t=null;if(t)i.send(t);if(r)i.end(r);return i};R.put=function(e,t,r){var i=R("PUT",e);if("function"==typeof t)r=t,t=null;if(t)i.send(t);if(r)i.end(r);return i};t.exports=R},{emitter:20,reduce:21}],20:[function(e,t,r){t.exports=i;function i(e){if(e)return o(e)}function o(e){for(var t in i.prototype){e[t]=i.prototype[t]}return e}i.prototype.on=i.prototype.addEventListener=function(e,t){this._callbacks=this._callbacks||{};(this._callbacks[e]=this._callbacks[e]||[]).push(t);return this};i.prototype.once=function(e,t){var r=this;this._callbacks=this._callbacks||{};function i(){r.off(e,i);t.apply(this,arguments)}i.fn=t;this.on(e,i);return this};i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var r=this._callbacks[e];if(!r)return this;if(1==arguments.length){delete this._callbacks[e];return this}var i;for(var o=0;o<r.length;o++){i=r[o];if(i===t||i.fn===t){r.splice(o,1);break}}return this};i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r){r=r.slice(0);for(var i=0,o=r.length;i<o;++i){r[i].apply(this,t)}}return this};i.prototype.listeners=function(e){this._callbacks=this._callbacks||{};return this._callbacks[e]||[]};i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],21:[function(e,t,r){t.exports=function(e,t,r){var i=0;var o=e.length;var n=arguments.length==3?r:e[i++];while(i<o){n=t.call(null,n,e[i],++i,e)}return n}},{}],22:[function(e,t,r){t.exports={name:"deployr",version:"7.4.0",description:"Simplified JavaScript client library for making requests to DeployR.",keywords:["deployr","deployr.io","ajax","R","api","simple"],author:"DeployR - Revolution Analytics Inc.",contributors:[{name:"Sean Wells"}],repository:{type:"git",url:"git://github.com/deployr/js-client-library.git"},homepage:"http://deployr.revolutionanalytics.com/documents/dev/client-jsdoc",scripts:{start:"gulp start",build:"gulp"},devDependencies:{browserify:"^9.0.3",gulp:"^3.8.11","gulp-connect":"^2.2.0","gulp-header":"^1.2.2","gulp-jshint":"^1.9.2","gulp-livereload":"^3.8.0","gulp-plumber":"^0.6.6","gulp-uglifyjs":"^0.6.0","gulp-util":"^3.0.4",tape:"^3.5.0","vinyl-source-stream":"^1.0.0"},dependencies:{"d.js":"^0.6.0",superagent:"^0.21.0",ws:"^0.4.32"},main:"deployr.js",engines:{node:">= 0.10.0"},license:"Apache 2.0 License"}},{}]},{},[1])(1)});